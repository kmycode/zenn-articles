---
title: "ç¬¬1ç« ã€€7ã€€å…·è±¡ã§ã¯ãªãæŠ½è±¡ã«ä¾å­˜ã™ã‚‹"
emoji: "ğŸ¤®"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['csharp', 'asukacs']
published: false
---

# ç›®æ¬¡

ã“ã‚Œã¯é€£è¼‰ã€Œã‚ã™ã‹ã®æ€ªæ–‡æ›¸ã€ã®è¨˜äº‹ã§ã™ã€‚[ç›®æ¬¡ã¯ã“ã¡ã‚‰ã‹ã‚‰ã”è¦§ã«ãªã‚Œã¾ã™](https://zenn.dev/kmy/articles/asuka-cs-0-index)

# è¨€ã„è¨³ï¼ˆè¦å‡ºå…¸ï¼‰

**ä¾å­˜æ€§ã®æ³¨å…¥**ï¼ˆè¦å‡ºå…¸ï¼‰ã¨ã„ã†è€ƒãˆæ–¹ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®é›†å¤§æˆã§ã‚ã‚Šï¼ˆè¦å‡ºå…¸ï¼‰ã€ã™ã¹ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èªãƒ—ãƒ­ã‚°ãƒ©ãƒãŒå¿…ãšãƒã‚¹ã‚¿ãƒ¼ã™ã¹ãã§ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ä¾å­˜æ€§ã®æ³¨å…¥ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¦ã„ãªã„äººã¯C#ã‚„Javaã®ãƒ—ãƒ­ã‚°ãƒ©ãƒã‚’åä¹—ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚
ç§ã¯ã“ã®è¨€è‘‰ã‚’ã¯ã˜ã‚ã¦èã„ãŸæ™‚ã€ã™ãã«ã¯ç†è§£ã§ããšï¼ˆè¦å‡ºå…¸ï¼‰ã€ã“ã‚Œã‚’ç†è§£ã—ã¦ã„ã‚‹äººã¯ã™ã”ã„ï¼ˆè¦å‡ºå…¸ï¼‰ã€ç†è§£ã™ã‚‹ã“ã¨ã§è‡ªåˆ†ã®æŠ€è¡“åŠ›ã®å¤§ããªãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã«ç¹‹ãŒã‚‹ã‹ã‚‚ã—ã‚Œãªã„ï¼ˆè¦å‡ºå…¸ï¼‰ã€ã¨ã„ã†æ„Ÿæƒ³ã‚’æŒã¡ã¾ã—ãŸï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ä»Šè€ƒãˆã¦ã¿ã‚Œã°ã€ãã‚Œã¯å…¨ãã®èª¤ã‚Šã§ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ä¾å­˜æ€§ã®æ³¨å…¥ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚’ç†è§£ã™ã‚‹ãªã‚‰ã‹ãªã‚ŠåˆæœŸã®æ–¹ã§ãƒã‚¹ã‚¿ãƒ¼ã™ã¹ãåŸºæœ¬çš„æŠ€è¡“ã§ã‚ã‚Šï¼ˆè¦å‡ºå…¸ï¼‰ã€ã“ã‚Œã‚’ç†è§£ã—ã¦åˆã‚ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åœŸä¿µã«ç«‹ã£ãŸã¨è¨€ãˆã¾ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚

:::message
ã§ã‚‚ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚’ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã ã¨è€ƒãˆã¦ã„ã‚‹äººè‡ªä½“ã€å®Ÿã¯å°‘ãªã„ã‚“ã§ã™ã‚ˆã­ï¼ˆè¦å‡ºå…¸ï¼‰
:::

ãŸã ã—ã€ä¾å­˜æ€§ã®æ³¨å…¥ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®å­¦ç¿’ã§æœ€åˆã«ã‚„ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ã“ã‚Œã¾ã§ã«èª¬æ˜ã—ãŸåŸå‰‡ãªã©ã‚’ç†è§£ã—ã¦åˆã‚ã¦ã€ä½¿ã„ã“ãªã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚
ã“ã®è¨˜äº‹ã§ã¯ã€SOLIDåŸå‰‡ã®DIPã¨ã„ã†ã‚ˆã‚Šã¯ã€ã‚€ã—ã‚ä¾å­˜æ€§ã®æ³¨å…¥ã®é‡è¦æ€§ã«ã¤ã„ã¦è¿°ã¹ã¾ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ãªãŠã“ã®è¨˜äº‹ã«ã¯é–“é•ã„ã—ã‹æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã®ã§ã€ä»–ã®äººã®æ›¸ã„ãŸè¨˜äº‹ã‚„æ›¸ç±ã ã‘ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚

:::message
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹ã¨ã€ã€Œä¾å­˜æ€§ã®æ³¨å…¥ã€ã¨ã„ã†å’Œè¨³ã¯èª¤ã‚Šã§ã‚ã‚‹ã¨ã„ã†æ„è¦‹ã‚’è¦‹ã‹ã‘ã¾ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚ãŸã ã€ãã®è¨€è‘‰ãŒåºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚äº‹å®Ÿã§ã™ï¼ˆè¦å‡ºå…¸ï¼‰ã€‚æœ¬è¨˜äº‹ã§ã¯ã€Œä¾å­˜æ€§ã®æ³¨å…¥ã€ã¨ã„ã†è¨€è‘‰ã‚’ä½¿ã„ã¾ã™ï¼ˆè¦å‡ºå…¸ï¼‰
:::

# å•é¡Œ

ã“ã‚Œã¯ã€äººé–“ã®å¹´é½¢ãƒ»ä½“é‡ã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ãã®ãƒ‡ãƒ¼ã‚¿ã¯ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ä¿å­˜ã«ã‚ˆã£ã¦æ°¸ç¶šåŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚
å°†æ¥çš„ã«ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ã®ã»ã‹ã€JSONãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¯ãƒ©ã‚¦ãƒ‰ï¼ˆFirebaseãªã©ï¼‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã¸ã®å¯¾å¿œã‚’äºˆå®šã—ã¦ã„ã¾ã™ã€‚
è¤‡æ•°ã®èª­ã¿è¾¼ã¿æ–¹æ³•ã‚’æƒ³å®šã—ãŸè¨­è¨ˆã¸ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã„ãŸã„ã®ã§ã™ãŒã€ã©ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã‹ï¼Ÿ

```cs
class Human
{
  public string Name { get; set; } = string.Empty;

  public int Age { get; set; }

  public int Weight { get; set; }

  public static Human FromFile(string fileName)
  {
    string raw = File.ReadAllLines(fileName)[0];
    string[] data = raw.Split(",");
    return new
    {
      Name = data[0],
      Age = int.Parse(data[1]),
      Weight = int.Parse(data[2]),
    };
  }

  public void Describe()
  {
    Console.WriteLine($"{this.Name} -- age {this.Age}, weight {this.Weight}");
  }
}
```

```mermaid
classDiagram
  class Human {
    +string Name
    +int Age
    +int Weight
    +FromFile(string)$ Human
    +Describe()
  }
```

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒA

ã¾ãšã€å¤šãã®äººãŒå›ç­”ã™ã‚‹ã§ã‚ã‚ã†æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªå›ç­”ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚å˜ç´”ã«ã€èª­ã¿è¾¼ã¿æ–¹æ³•ã®æ•°ã ã‘ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```cs
class Human
{
  public string Name { get; set; } = string.Empty;

  public int Age { get; set; }

  public int Weight { get; set; }

  public static Human FromFile(string fileName)
  {
    // ...
  }

  public static Human FromJsonFile(string fileName)
  {
    // ...
  }

  public static Human FromFirestore(DocumentReference ref)
  {
    // ...
  }

  public void Describe()
  {
    Console.WriteLine($"{this.Name} -- age {this.Age}, weight {this.Weight}");
  }
}
```

```mermaid
classDiagram
  class Human {
    +string Name
    +int Age
    +int Weight
    +FromFile(string)$ Human
    +FromJsonFile(string)$ Human
    +FromFirestore(DocumentReference)$ Human
    +Describe()
  }
```

ã“ã‚Œã¯æœ€ã‚‚å˜ç´”ãªè§£æ±ºæ³•ã§ã™ã€‚å®Ÿéš›ã€è¦æ¨¡ã®å°ã•ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Œã°ã€ã“ã®å¯¾å‡¦ã§ååˆ†ã§ã—ã‚‡ã†ã€‚
ã—ã‹ã—å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­è¨ˆã™ã‚‹éš›ã¯å•é¡Œã«ãªã‚Šã¾ã™ã€‚

ãã‚‚ãã‚‚å•é¡Œã®æ™‚ç‚¹ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ãƒ»è§£æå‡¦ç†ã¯`Human`ã‚¯ãƒ©ã‚¹ã®è²¬å‹™ã«è¦‹åˆã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ`Human`ã‚¯ãƒ©ã‚¹ã¯ã‚ãã¾ã§äººé–“ã«é–¢ã™ã‚‹çŠ¶æ…‹ãƒ»æ“ä½œã‚’æä¾›ã™ã¹ãã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿å–ã‚Šã¯åˆ¥ã®è²¬å‹™ã¨ã—ã¦æ‰±ã†ã¹ãã§ã™ã€‚
è²¬å‹™ãŒè¤‡æ•°å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã¦ä¿å­˜ã™ã‚‹å ´åˆã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚ãã®å‡¦ç†ã¯ä¸Šè¨˜ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ãŒã€ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹ä¸Šã§å«ã¾ã‚Œã‚‹å¯èƒ½æ€§ã®éå¸¸ã«é«˜ã„å‡¦ç†ã§ã™ã€‚ä¸Šè¨˜ã®ä¾‹ã«å¾“ã£ã¦è€ƒãˆã‚‹ã¨ã€ä¿å­˜å‡¦ç†ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¾ã™ã€‚

```cs
class Human
{
  public string Name { get; set; } = string.Empty;

  public int Age { get; set; }

  public int Weight { get; set; }

  public static Human FromFile(string fileName)
  {
    // ...
  }

  public static Human FromJsonFile(string fileName)
  {
    // ...
  }

  public static Human FromFirestore(DocumentReference ref)
  {
    // ...
  }

  public void SaveAsFile(string fileName)
  {
    // ...
  }

  public void SaveAsJsonFile(string fileName)
  {
    // ...
  }

  public void SaveToFirestore(DocumentReference ref)
  {
    // ...
  }

  public void Describe()
  {
    Console.WriteLine($"{this.Name} -- age {this.Age}, weight {this.Weight}");
  }
}
```

ä¿å­˜æ–¹æ³•ã®æ•°ã ã‘ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¢—ãˆã€ã‚¯ãƒ©ã‚¹ã‚’å†—é•·ã«ã•ã›ã¾ã™ã€‚ã¾ãŸã€æ°¸ç¶šåŒ–ã®æ–¹æ³•ãŒå¢—ãˆã‚‹ãŸã³ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»˜ã‘è¶³ã—ã—ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚

ã‚‚ã†ï¼‘ã¤å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚å•é¡Œã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯`Human`ã‚¯ãƒ©ã‚¹ã®ã¿ã‚’æ²ç¤ºã—ã¾ã—ãŸãŒã€å®Ÿéš›ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã¯`Human`ã ã‘ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚`Animal`ãªã©åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚‚å–ã‚Šæ‰±ã†æ™‚ã€åŒã˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å„ã‚¯ãƒ©ã‚¹ã«ã„ã¡ã„ã¡è¿½åŠ ã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿæ°¸ç¶šåŒ–ã®æ–¹æ³•ãŒå¢—ãˆã‚‹ã¨ã€ãã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã«è¿½åŠ ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»˜ã‘åŠ ãˆãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚ã“ã®ã“ã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿å®ˆæ€§ã‚’ä¸å®‰å®šãªã‚‚ã®ã«ã—ã¾ã™ã€‚
è¤‡æ•°ã®ã‚¯ãƒ©ã‚¹ã«åŒã˜`static`ãƒ¡ã‚½ãƒƒãƒ‰ãŒç™ºç”Ÿã™ã‚‹ã®ã¯ä»•æ–¹ãªã„ã“ã¨ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã›ã‚ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã‚‹ãƒã‚§ãƒƒã‚¯ã‚’å—ã‘ãšæ‰‹å‹•ã§ç®¡ç†ã›ã–ã‚‹ã‚’å¾—ãªã„å…±é€šéƒ¨åˆ†ã¯å¿…è¦æœ€å°é™ã«ã—ãŸã„ã‚‚ã®ã§ã™ã€‚

```mermaid
classDiagram
  class Human {
    +FromFile(string)$ Human
    +FromJsonFile(string)$ Human
    +FromFirestore(DocumentReference)$ Human
    +SaveAsFile(string)
    +SaveAsJsonFile(string)
    +SaveToFirestore(DocumentReference)
    +Describe()
  }
  class Animal {
    +FromFile(string)$ Animal
    +FromJsonFile(string)$ Animal
    +FromFirestore(DocumentReference)$ Animal
    +SaveAsFile(string)
    +SaveAsJsonFile(string)
    +SaveToFirestore(DocumentReference)
    +Describe()
  }
  class Car {
    +FromFile(string)$ Car
    +FromJsonFile(string)$ Car
    +FromFirestore(DocumentReference)$ Car
    +SaveAsFile(string)
    +SaveAsJsonFile(string)
    +SaveToFirestore(DocumentReference)
    +Describe()
  }
```

ã•ã‚‰ã«ã‚‚ã†ï¼‘ã¤å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã‚’å‘¼ã³å‡ºã™å´ã¯ã©ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ãªã‚‹ã‹ã€æƒ³åƒã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚

```cs
if (this.storageType == Storage.File)
{
  human = Human.FromFile(this.fileName);
}
else if (this.storageType == Storage.JsonFile)
{
  human = Human.FromJsonFile(this.jsonFileName);
}
else if (this.storageType == Storage.Firestore)
{
  human = Human.FromFirestore(this.firestoreRef);
}
```

ä¿å­˜å½¢å¼ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°ã‚’åˆ¥é€”ç”¨æ„ã—ã€ãã‚Œã«å¯¾å¿œã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’`if`åˆ†å²ã§å‘¼ã³å‡ºã•ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã¸æ¸¡ã™å¼•æ•°ã‚‚åˆ¥ã€…ã«ç®¡ç†ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã¨ã„ã†ã®ã‚‚æ°—ã«ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ä»Šå¾Œæ–°ã—ã„æ°¸ç¶šåŒ–æ–¹æ³•ã‚’è¿½åŠ ã™ã‚‹æ™‚ã€ã“ã®æ¡ä»¶åˆ†å²ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å¯¾è±¡ã«ãªã‚‹ã¨ã„ã†ã®ã¯è¨€ã†ã¾ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚æ©Ÿèƒ½è¿½åŠ ã‚’è¡Œã†æ™‚ã€å½±éŸ¿ç¯„å›²ãŒå¢—ãˆã‚‹ã“ã¨ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ‹¡å¼µæ€§ã‚’æãªã„ã€å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¿å®ˆã‚’å›°é›£ã«ã—ã¾ã™ã€‚

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒB

ã‚¢ãƒ—ãƒ­ãƒ¼ãƒAã«ãŠã„ã¦ã€`Human`ã‚¯ãƒ©ã‚¹ã¯è²¬å‹™åˆ†å‰²ãŒã§ãã¦ã„ãªã„ã¨è¿°ã¹ã¾ã—ãŸã€‚ã—ãŸãŒã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å‡¦ç†ã‚’`static`ã‚¯ãƒ©ã‚¹ã«ç§»å‹•ã—ã¾ã—ãŸã€‚

```mermaid
classDiagram
  class Human {
    +Describe()
  }
  class Animal {
    +Describe()
  }
  class Car {
    +Describe()
  }
  class EntityStorageUtil {
    +HumanFromFile(string)$ Human
    +HumanFromJsonFile(string)$ Human
    +HumanFromFirestore(DocumentReference)$ Human
    +AnimalFromFile(string)$ Animal
    +AnimalFromJsonFile(string)$ Animal
    +AnimalFromFirestore(DocumentReference)$ Animal
    +CarFromFile(string)$ Car
    +CarFromJsonFile(string)$ Car
    +CarFromFirestore(DocumentReference)$ Car
    +SaveAsFile(Human, string)$
    +SaveAsJsonFile(Human, string)$
    +SaveToFirestore(Human, DocumentReference)$
    +SaveAsFile(Animal, string)$
    +SaveAsJsonFile(Animal, string)$
    +SaveToFirestore(Animal, DocumentReference)$
    +SaveAsFile(Car, string)$
    +SaveAsJsonFile(Car, string)$
    +SaveToFirestore(Car, DocumentReference)$
  }
```

æ ¹æœ¬çš„ãªè§£æ±ºã«ãªã£ã¦ã„ãªã„ã“ã¨ã¯æ˜ã‚‰ã‹ã§ã™ã€‚ãã‚Œã°ã‹ã‚Šã§ãªãã€ã‚¯ãƒ©ã‚¹ã‚’å¢—ã‚„ã™ãŸã³`EntityStorageUtil`ã‚¯ãƒ©ã‚¹ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã®ã§ã€å½±éŸ¿ç¯„å›²ã‚’ç„¡é§„ã«å¢—ã‚„ã™ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒC

å°‘ã€…ã®åè¦‹ã¯å…¥ã‚Šã¾ã™ãŒã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘åˆå¿ƒè€…ãŒã‚„ã‚Šãã†ãªè§£ã‚’ç¤ºã—ã¾ã™ã€‚ã¾ãšã€è²¬å‹™åˆ†å‰²ã«ã‚ˆã‚Šèª­ã¿è¾¼ã¿å‡¦ç†ã‚’ã‚¯ãƒ©ã‚¹ã¸å¤‰æ›ã—ã‚ˆã†ã¨è€ƒãˆã‚‹ã§ã—ã‚‡ã†ã€‚ã‚¢ãƒ—ãƒ­ãƒ¼ãƒBã§ã¯é™çš„ã‚¯ãƒ©ã‚¹ã¸ã®å¤‰æ›ã ã£ãŸãŸã‚å¤±æ•—ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯ãã®åçœã‚’ç”Ÿã‹ã—ã¦é€šå¸¸ã®ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€æ¥ç¶šã«å¿…è¦ãªæƒ…å ±ã‚’çŠ¶æ…‹ã¨ã—ã¦ã‚¯ãƒ©ã‚¹ã«æŒãŸã›ã¾ã™ã€‚

```cs
class CsvFileLoader
{
  public CsvFileLoader(string fileName)
  {
    // ...
  }

  public List<string> Load()
  {
    // ...
  }
}

class JsonFileLoader
{
  public JsonFileLoader(string fileName)
  {
    // ...
  }

  public Dictionary<string, string> Load()
  {
    // ...
  }
}

class FirestoreLoader
{
  public FirestoreLoader(string fileName)
  {
    // ...
  }

  public Dictionary<string, object> Load()
  {
    // ...
  }
}
```

ç¢ºã‹ã«æ¥ç¶šã‚„ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¿…è¦ãªæƒ…å ±ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ ¼ç´ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿èª­è¾¼æ™‚ã«æ¥ç¶šæƒ…å ±ã‚’ç›´æ¥å–ã‚Šæ‰±ã†å¿…è¦ãŒãªããªã‚Šã€å‡¦ç†ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã¾ã¨ã‚ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
çµæœè«–ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯éå¸¸ã«æƒœã—ã„ã§ã™ã€‚ãªãœãªã‚‰ã°ã€`Human`ã‚¯ãƒ©ã‚¹ã€å‘¼ã³å‡ºã—å´ã§ã®æ¡ä»¶åˆ†å²ã‚’é™¤å»ã§ããªã„ã‹ã‚‰ã§ã™ã€‚ãã‚Œãã‚Œã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã«å¤‰ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚

```cs
class Human
{
  public string Name { get; set; } = string.Empty;

  public int Age { get; set; }

  public int Weight { get; set; }

  public static Human Create(CsvFileLoader loader)
  {
    List<string> data = loader.Load();
    return new
    {
      Name = data[0],
      Age = int.Parse(data[1]),
      Weight = int.Parse(data[2]),
    };
  }

  public static Human Create(JsonFileLoader loader)
  {
    Dictionary<string, string> data = loader.Load();
    return new
    {
      Name = data["Name"],
      Age = int.Parse(data["Age"]),
      Weight = int.Parse(data["Weight"]),
    };
  }

  public static Human Create(FirestoreLoader loader)
  {
    Dictionary<string, object> data = loader.Load();
    return new
    {
      Name = data["Name"].ToString(),
      Age = (int)data["Age"],
      Weight = (int)data["Weight"],
    };
  }

  public void Describe()
  {
    Console.WriteLine($"{this.Name} -- age {this.Age}, weight {this.Weight}");
  }
}
```

```cs
if (this.storageType == Storage.File)
{
  human = Human.Create(this.csvFile);
}
else if (this.storageType == Storage.JsonFile)
{
  human = Human.Create(this.jsonFile);
}
else if (this.storageType == Storage.Firestore)
{
  human = Human.Create(this.firestore);
}
```

æ°¸ç¶šåŒ–æ‰‹æ®µãŒå¢—ãˆã‚‹ãŸã³ã«`if`åˆ†å²ã€`static`ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã¨ã„ã†å•é¡Œç‚¹ã¯å¤‰åŒ–ã—ã¾ã›ã‚“ã€‚
ã•ã‚‰ã«è¨€ã†ã¨ã“ã‚Œã¯ã€å˜ä¸€è²¬ä»»åŸå‰‡ã®ç›®çš„ã§ã‚ã‚‹ã€Œã‚¯ãƒ©ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ç†ç”±ã¯å”¯ä¸€ã«ã™ã‚‹ã€ã«ã‚‚æŠµè§¦ã—ã€ã‚¯ãƒ©ã‚¹ã®ä¿å®ˆæ€§ã¯æ”¹å–„ã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€ã•ã‚‰ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯èƒ½ã§ã™ã€‚

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒD

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«åŸºã¥ã„ãŸä¸€èˆ¬çš„ãªè§£ã‚’ç¤ºã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒ­ãƒ¼ãƒCã§ä½œæˆã—ãŸï¼”ã¤ã®ã‚¯ãƒ©ã‚¹ã«ã€åŒä¸€ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã•ã›ã¾ã™ã€‚

```cs
interface ILoader
{
  Dictionary<string, string> Load();
}

class CsvFileLoader : ILoader
{
  public CsvFileLoader(string fileName, IList<string> columnNames)
  {
    // ...
  }

  public Dictionary<string, string> Load()
  {
    // ...
  }
}

class JsonFileLoader : ILoader
{
  public JsonFileLoader(string fileName)
  {
    // ...
  }

  public Dictionary<string, string> Load()
  {
    // ...
  }
}

class FirestoreLoader : ILoader
{
  public FirestoreLoader(string fileName)
  {
    // ...
  }

  public Dictionary<string, string> Load()
  {
    // ...
  }
}
```

ã“ã‚Œã‚’è¦‹ã‚‹ã¨ã€`CsvFileLoader`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«`columnNames`ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã™ã€‚åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã•ã›ã‚‹ãŸã‚ã«ã¯`Load`ãƒ¡ã‚½ãƒƒãƒ‰ã®å‡ºåŠ›ã‚‚æƒãˆãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚`columnNames`ã¯ã€CSVã®å„åˆ—ã«åå‰ã‚’ã¤ã‘ã¾ã™ã€‚`List<string>`ã®å„è¡Œã«ãƒ©ãƒ™ãƒ«ã‚’ä»˜ã‘ã€`Dictionary<string, string>`ã¸å¤‰æ›ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ã‚·ã‚°ãƒ‹ãƒãƒ£ã‚’å¤‰æ›´ã™ã‚‹ã®ã¯ã€ã‚ˆãã‚ã‚‹æ‰‹æ³•ã§ã™ã€‚ãªãœãªã‚‰ã€æœ€åˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆæ™‚ã«ã©ã†ã—ã¦ã‚‚`new`å¥ã«ã‚ˆã‚‹ã‚¯ãƒ©ã‚¹åã¸ã®ä¾å­˜ãŒç™ºç”Ÿã—ã€æ¡ä»¶åˆ†å²ãŒå¿…é ˆã«ãªã‚‹ã‹ã‚‰ã§ã™ã€‚ãã®`new`ã«ã‚ˆã‚‹ä¾å­˜ç™ºç”Ÿæ™‚ã«ç‹¬è‡ªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã€å®Ÿè£…ã¸ã®ä¾å­˜ã‚’å¢—ã‚„ã™ã“ã¨ã«ã¯ã¤ãªãŒã‚‰ãªã„ãŸã‚ã€å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

:::message
ã‚¯ãƒ©ã‚¹åã‚’å‹•çš„ã«æŒ‡å®šã—ã¦`Activator`ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ãã“ã¾ã§ã‚„ã‚‹äººã¯ã¾ãšã“ã®é€£è¼‰ã‚’èª­ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚è‡ªåˆ†ã§DIã‚³ãƒ³ãƒ†ãƒŠæ§‹ç¯‰ã™ã‚‹ãªã‚Šé ‘å¼µã£ã¦ãã ã•ã„
:::

```cs
// private ILoader? loader;

if (this.storageType == Storage.File)
{
  this.loader = new CsvFileLoader(this.fileName, Columns.Human);
}
else if (this.storageType == Storage.JsonFile)
{
  this.loader = new JsonFileLoader(this.fileName);
}
else if (this.storageType == Storage.Firestore)
{
  DocumentReference refObj;

  // ...

  this.loader = new FirestoreLoader(refObj);
}
```

ã—ã‹ã—ã€ä¸€åº¦`new`ã—ã¦ã—ã¾ã£ãŸã‚ã¨ã®`loader`ã®æ‰±ã„æ–¹ã¯ã€é©šãã»ã©ç°¡å˜ã§ã™ã€‚ã¾ãšã€`Human`ã‚¯ãƒ©ã‚¹ã®èª­ã¿è¾¼ã¿å‡¦ç†ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç°¡ç•¥åŒ–ã§ãã¾ã™ã€‚

```cs
class Human
{
  public string Name { get; set; } = string.Empty;

  public int Age { get; set; }

  public int Weight { get; set; }

  public static Human Create(ILoader loader)
  {
    var data = loader.Load();
    return new
    {
      Name = data["Name"],
      Age = int.Parse(data["Age"]),
      Weight = int.Parse(data["Weight"]),
    };
  }

  public void Describe()
  {
    Console.WriteLine($"{this.Name} -- age {this.Age}, weight {this.Weight}");
  }
}
```

```mermaid
classDiagram
  ILoader <|.. CsvFileLoader
  ILoader <|.. JsonFileLoader
  ILoader <|.. FirestoreLoader
  Human -- ILoader
  class Human {
    +string Name
    +int Age
    +int Weight
    +Create(ILoader)$ Human
    +Describe()
  }
  class ILoader {
    +Load() Dictionary~string_string~
  }
```

ã“ã‚Œã¾ã§ã®ã‚ˆã†ã«ã€CSVã‹Jsonã‹Firestoreã‹ã§ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ†ã‘ã‚‹å¿…è¦ã¯ã‚‚ã¯ã‚„ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®`Create(ILoader)`ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Œã°ååˆ†ã§ã™ã€‚
å‘¼ã³å‡ºã—å´ã¯ãŸã ã²ã¨ã¤ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã°ã„ã„ã‚ã‘ã§ã™ã€‚

```cs
var human = Human.Create(this.loader);
```

ã“ã‚Œã¾ã§ã‚ã£ãŸã‚ˆã†ãªæ¡ä»¶åˆ†å²ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸€åº¦`new`ã—ã¦ã—ã¾ãˆã°ã€ãã®ã‚ã¨ã®å‡¦ç†ã‚’ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚‚ç°¡ç•¥åŒ–ã•ã‚Œã¾ã™ã€‚æ–°ã—ã„æ°¸ç¶šåŒ–æ–¹å¼ã‚’è¿½åŠ ã™ã‚‹æ™‚ã¯ã€æ–°ã—ã„å…·è±¡ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹å‡¦ç†ã‚’ã„ã˜ã‚‹ã ã‘ã§çµ‚ã‚ã‚Šã§ã™ã€‚æŠ½è±¡ã®ã¿ã«ä¾å­˜ã™ã‚‹`Create`ã‚’å«ã‚€å…¨ã¦ã®å‡¦ç†ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã“ã¨ã¯ã€ä¿®æ­£æ™‚ã®å½±éŸ¿ç¯„å›²ã‚’æœ€å°é™ã«ã™ã‚‹ã“ã¨ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ã€‚

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒE

ã“ã“ã‹ã‚‰å…ˆã¯æœ¬è¨˜äº‹ã®è¶£æ—¨ã¨ã¯ã‚„ã‚„å¤–ã‚Œã¾ã™ãŒã€ã‚¢ãƒ—ãƒ­ãƒ¼ãƒDã®è¨­è¨ˆã‚’ã•ã‚‰ã«ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã¾ãšã€ä»Šå›ä½œæˆã—ãŸã‚¯ãƒ©ã‚¹ã¯ã¾ãŸè²¬å‹™åˆ†å‰²ãŒå¯èƒ½ãªã“ã¨ã«ãŠæ°—ã¥ãã§ã—ã‚‡ã†ã‹ã€‚ã™ã§ã«ãã‚Œãã‚Œã®ã‚¯ãƒ©ã‚¹ã®åå‰ã«ãƒ’ãƒ³ãƒˆãŒå‡ºã¦ã„ã¾ã™ã€‚

* CsvFileLoader
* JsonFileLoader
* FirestoreLoader

`CsvFileLoader`ã¨`JsonFileLoader`ã¯ã€ã¨ã‚‚ã«ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿è¾¼ã‚€ã€ã¨ã„ã†å‡¦ç†ãŒå…±é€šã—ã¦ã„ã¾ã™ã€‚ã¾ãŸ`FirestoreLoader`ã‚‚ã€ä»Šå›ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨å‘¼ã°ã‚Œã‚‹Firestoreä¿å­˜å½¢å¼ã®ï¼‘ã¤ã‚’ãã®ã¾ã¾ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã¾ã—ãŸãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä¸€éƒ¨ã®ã¿ã‚’JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—ã—ã€ãã‚Œã‚’èª­ã¿å–ã‚‹å ´åˆã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã¯ã€ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

* ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã™ã‚‹
* ãã‚Œã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§èª­ã¿å–ã‚Šå¯èƒ½ãªå½¢å¼ã«å¤‰æ›ã™ã‚‹

ãã®ãŸã‚ã€å°‘ãªãã¨ã‚‚`CsvFileLoader`ã¨`JsonFileLoader`ã§ã¯å‡¦ç†ã®é‡è¤‡ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ä¸Šè¨˜ï¼’ã¤ã®å‡¦ç†ã‚’åˆ¥ã€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åˆ†è§£ã—ã¦ã—ã¾ã„ã¾ã™ã€‚

:::message
è¨˜äº‹ãŒå†—é•·ã«ãªã‚‹ã®ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã ã‘ã‚’ç¤ºã—ã¾ã™
:::

```cs
interface ILoader
{
  IReader Load();
}

interface IReader
{
  Dictionary<string, string> Read();
}
```

```mermaid
classDiagram
  FileLoader <|-- CsvFileLoader
  FileLoader <|-- JsonFileLoader
  ILoader <|.. CsvFileLoader
  ILoader <|.. JsonFileLoader
  ILoader <|.. FirestoreLoader
  IReader <|.. CsvStringReader
  IReader <|.. JsonStringReader
  IReader <|.. FirestoreDocumentReader
  Human -- ILoader
  ILoader -- IReader
  class Human {
    +string Name
    +int Age
    +int Weight
    +Create(ILoader)$ Human
    +Describe()
  }
  class ILoader {
    +Load() IReader
  }
  class IReader {
    +Read() Dictionary~string_string~
  }
```

`CsvFileLoader`ã¨`JsonFileLoader`ã«å…±é€šã®åŸºåº•ã‚¯ãƒ©ã‚¹`FileLoader`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æ–‡å­—åˆ—ã‚’å–å¾—ã™ã‚‹å‡¦ç†ãŒå…±é€šåŒ–ã•ã‚ŒãŸã“ã¨ã«ãŠæ°—ã¥ãã§ã—ã‚‡ã†ã‹ã€‚
ã¾ãŸã€å‘¼ã³å‡ºã—å´ã¯ä»¥ä¸‹ã®å‡¦ç†ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```cs
class Human
{
  // ...

  public static Human Create(ILoader loader)
  {
    var data = loader.Load().Read();    // ã“ã“ãŒå¤‰ã‚ã£ãŸ
    return new
    {
      Name = data["Name"],
      Age = int.Parse(data["Age"]),
      Weight = int.Parse(data["Weight"]),
    };
  }

  // ...
}
```

ã‚‚ã¡ã‚ã‚“ã“ã®ä»–ã«ã‚‚è€ƒãˆã‚‰ã‚Œã‚‹è§£æ”¾ã¯è¤‡æ•°å­˜åœ¨ã—ã¾ã™ã€‚
ãŸã ã‚¢ãƒ—ãƒ­ãƒ¼ãƒEã«ã‚‚æ¬ ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚è²¬å‹™ã‚’ç´°ã‹ãåˆ†å‰²ã™ã‚‹ã“ã¨ã¯ã‚¯ãƒ©ã‚¹ã®ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã‚‹åé¢ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’è¤‡é›‘åŒ–ã•ã›ã¾ã™ã€‚ã‚ˆã£ã¦å°è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã–ã‚ã–ã“ã®æ›¸ãæ–¹ã‚’ã™ã¹ãã§ã‚ã‚‹ã‹ã¨è¨€ã†ã¨ã€å¿…ãšã—ã‚‚ãã†ã¯è¨€ãˆãªã„ã¨æ€ã„ã¾ã™ã€‚å°è¦æ¨¡ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯æ‰‹ã‚’æŠœãã“ã¨ã‚‚ã€ã‹ãˆã£ã¦ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
çŠ¶æ³ã«å¿œã˜ã¦æ§˜ã€…ãªè¨­è¨ˆãŒæƒ³å®šã•ã‚Œã‚‹ã¨ã“ã‚ãŒã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®æœ€ã‚‚é›£ã—ãã€é¢ç™½ã„ã¨ã“ã‚ã§ã™ã€‚

## ã‚¢ãƒ—ãƒ­ãƒ¼ãƒF

å®Ÿã¯ã“ã‚Œã¯ã‚‚ã£ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‡ºæ¥ã¾ã™ã€‚ç°¡æ˜“çš„ãªãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’è‡ªä½œã—ã¦ã—ã¾ã†ã®ã§ã™ã€‚ãã—ã¦ã€`Human`ã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ç‹¬è‡ªã®`Attribute`ã‚’è¨­å®šã—ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’é§†ä½¿ã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã—ã¦â€¥â€¥â€¥â€¥ã“ã«ã‚‡ã“ã«ã‚‡ã™ã‚Œã°ã€`Human`ã‚¯ãƒ©ã‚¹ã«`Create`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã‚‹å¿…è¦ã™ã‚‰ãªããªã‚Šã¾ã™ã€‚
ã„ã£ãã®ã“ã¨ã€DIã‚³ãƒ³ãƒ†ãƒŠã‚’è‡ªä½œã™ã‚‹ã‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰æŒã£ã¦ãã¦ä½¿ã†æ‰‹ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã§ã™ãŒã“ã“ã¾ã§ã‚„ã‚‹ã¨å®Œå…¨ã«æœ¬è¨˜äº‹ã®è¶£æ—¨ã‹ã‚‰å¤–ã‚Œã¾ã™ã®ã§ã€å„è‡ªå¦„æƒ³ã—ã¦ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†æ‰‹ã‚‚ã‚ã‚Šã¾ã™ã€‚æ‰‹æ®µã¯ç„¡é™ã«ã‚ã‚Šã¾ã™ã€‚

# ã¾ã¨ã‚

è¤‡æ•°ã®å…·è±¡ã‚¯ãƒ©ã‚¹ã¯å…±é€šç‚¹ã‚’æŒã¡ã¾ã™ã€‚æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ãã®å…±é€šç‚¹ã‚’å¯è¦–åŒ–ã—ã€ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ‰‹æ®µã‚’æä¾›ã—ã¾ã™ã€‚ãã®è¦ä»¶ã•ãˆæº€ãŸã—ã¦ã„ã‚Œã°ã€ã©ã®ã‚ˆã†ãªå…·è±¡ã‚¯ãƒ©ã‚¹ã§ã‚ã£ã¦ã‚‚æŠ½è±¡ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯æ‹¡å¼µæ€§ã€ä¿å®ˆæ€§ã®è¦³ç‚¹ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«å¤§ããªã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚’ä¸ãˆã¾ã™ã€‚
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæŠ½è±¡ã®ã¿ã«ä¾å­˜ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ç¯„å›²ãŒæœ€å°é™ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€æ–°ã—ã„å…·è±¡ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹æ™‚ã«ã€æ—¢å­˜ã®å…·è±¡ã‚¯ãƒ©ã‚¹ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚å…·è±¡åŒå£«ã®ç«¶åˆã«é–¢ã—ã¦ã¯åˆ¥é€”è­°è«–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€æŠ½è±¡ã¸ã®ä¾å­˜ãŒã‚‚ãŸã‚‰ã™ãƒ¡ãƒªãƒƒãƒˆã¯ã‚ã¾ã‚Šã«ã‚‚å¤§ãã„ã§ã™ã€‚
å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­è¨ˆã™ã‚‹æ™‚ã«ã€ã“ã®è€ƒãˆæ–¹ã¯å¿…è¦ä¸å¯æ¬ ã§ã™ã€‚ã“ã‚Œãªãã—ã¦åˆç†çš„è¨­è¨ˆã¯ã¾ãšä¸å¯èƒ½ã§ã—ã‚‡ã†ã€‚

ã‚€ã‚ã‚“ã€[ãƒªã‚¹ã‚³ãƒ•ã®ç½®æ›åŸå‰‡ï¼ˆè¦å‡ºå…¸ï¼‰](https://zenn.dev/kmy/articles/asuka-cs-1-6-subclass-method)ã®éµå®ˆã¯ä¸å¯æ¬ ã§ã™ã€‚å…·è±¡ã®å‡ºåŠ›ã‚’å‡ä¸€åŒ–ã—ã€æŠ½è±¡ã«å¯¾ã™ã‚‹ä¿¡é ¼æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã€æŠ½è±¡ã¸ã®ä¾å­˜ã®å¤§å‰æã§ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘åˆå¿ƒè€…ã¯ã€ã¾ãšãã“ã‚’æ„è­˜ã—ãŸç¶™æ‰¿ãƒ»å®Ÿè£…ã‚’è¡Œã†ã¹ãã§ã™ã€‚

ä»Šå›ç´¹ä»‹ã—ãŸã®ã¯ã€ã‚¢ãƒ—ãƒ­ãƒ¼ãƒDã€œEã§ã¯æ‰‹å‹•ã§ã®ä¾å­˜æ€§æ³¨å…¥ã§ã™ã€‚ã“ã‚Œã‚’è‡ªå‹•åŒ–ã™ã‚‹ã®ãŒDIã‚³ãƒ³ãƒ†ãƒŠã§ã™ãŒã€ç§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ãªã®ã§ã€æ—¢å­˜ã®å°‚ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã‚ˆã‚Šã‚‚`static`ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã‚„ã€æŠ½è±¡ã‚’è¿”å´ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½œã£ã¦ä½¿ã£ãŸã»ã†ãŒæ¥½ã‹ãªã¨æ€ã„ã¾ã™ã—ã€å®Ÿéš›ãã¡ã‚‰ã‚’ã‚ˆãä½¿ã„ã¾ã™ã€‚ã„ãšã‚Œã«ã—ã‚ã€ç®±ã®ä¸­èº«ã‚’è¦‹ãšã«å¤–è¦³ã ã‘ã§æ“ä½œã§ãã‚‹ã‚ˆã†ãªè¨­è¨ˆã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãŒæä¾›ã™ã‚‹æŠ½è±¡åŒ–ã‚’ã†ã¾ãåˆ©ç”¨ã—ãŸã‚‚ã®ã¨è¨€ãˆã€å¤§å¤‰é‡è¦ãªæ¦‚å¿µã§ã™ã€‚
ãã‚Œã«ã‚‚é–¢ã‚ã‚‰ãšã€å®Ÿéš›ã®ç¾å ´ã§ã¯ï¼ˆãŠãã‚‰ããƒ™ãƒ³ãƒãƒ£ãƒ¼ä¼æ¥­ã‚„å¤–è³‡ç³»ä¼æ¥­ã¯ä¾‹å¤–ã§ã—ã‚‡ã†ãŒï¼‰ä½¿ç”¨ä¾‹ãŒã»ã¨ã‚“ã©è¦‹ã‚‰ã‚Œãªã„ã®ãŒã¨ã¦ã‚‚æ®‹å¿µã§ã™ã€‚ä½¿ç”¨ä¾‹ãŒã‚‚ã—ã‚ã£ãŸã¨ã—ã¦ã‚‚ã€ãã‚Œã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã†ãŸã‚ã«ç¾©å‹™çš„ã«ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã°ã‹ã‚Šã§ã€èƒ½å‹•çš„ãªæŠ½è±¡ã¸ã®ä¾å­˜ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€æ—¥æœ¬ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãŒC#ã‚„Javaãªã©ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èªã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆã‚’ååˆ†ã«äº«å—ã—ã¦ã„ãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚æ—¥æœ¬ã®ITä¼æ¥­ã®æ®‹æ¥­ãŒå¤šã„ã¨ã„ã‚ã‚Œã‚‹ã®ã¯ã€éå¸¸è­˜ãªé¡§å®¢ã‚„æ¡ˆä»¶ã®å­˜åœ¨ã¯ã‚‚ã¡ã‚ã‚“ã®ã“ã¨ã§ã™ãŒã€åŠ¹ç‡çš„ã‹ã¤å°†æ¥ã‚’è¦‹æ®ãˆãŸã€**å¤‰åŒ–ã«å¼·ã„è¨­è¨ˆ**ã‚’ãŠã“ãªã†ã‚¹ã‚­ãƒ«ãŒååˆ†ã«åºƒã¾ã£ã¦ã„ãªã„ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

:::message
åŠ¹ç‡æ€§ã‚’é‡è¦–ã™ã‚‹äººã¯ã€ãã‚‚ãã‚‚ã“ã‚“ãªç´ äººã«ã‚ˆã‚‹é–“é•ã„ã ã‚‰ã‘ã®é€£è¼‰ã‚’èª­ã‚“ã§ã¯ã„ã‘ã¾ã›ã‚“ã€‚[ç›®æ¬¡ã®ãƒšãƒ¼ã‚¸](https://zenn.dev/kmy/articles/asuka-cs-0-index)ã§ç´¹ä»‹ã™ã‚‹æ›¸ç±ã‚’èª­ã‚“ã ã»ã†ãŒã€é¥ã‹ã«æ™‚é–“ã‚’ç¯€ç´„ã§ãã¾ã™
:::

# ç›®æ¬¡

ã“ã‚Œã¯é€£è¼‰ã€Œã‚ã™ã‹ã®æ€ªæ–‡æ›¸ã€ã®è¨˜äº‹ã§ã™ã€‚[ç›®æ¬¡ã¯ã“ã¡ã‚‰ã‹ã‚‰ã”è¦§ã«ãªã‚Œã¾ã™](https://zenn.dev/kmy/articles/asuka-cs-0-index)